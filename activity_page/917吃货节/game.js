!function(){function i(i,e){for(var t in e)i[t]=e[t];return i}var e="app-m-chihuo@0.3.9/entries/game.js",t="app-m-chihuo@0.3.9/entries/gamepotal.js",s="app-m-chihuo@0.3.9/entries/index.js",n="app-m-chihuo@0.3.9/entries/puzzle.js",a="app-m-chihuo@0.3.9/entries/util/appinit.js",o="app-m-chihuo@0.3.9/entries/util/cfg.js",d="app-m-chihuo@0.3.9/entries/util/checkshare.js",r="app-m-chihuo@0.3.9/entries/util/fx.js",l="app-m-chihuo@0.3.9/entries/util/fx_methods.js",c="app-m-chihuo@0.3.9/entries/util/lazyload.js",u="app-m-chihuo@0.3.9/entries/util/loading.js",p="app-m-chihuo@0.3.9/entries/util/login.js",f="app-m-chihuo@0.3.9/entries/util/overlay.js",h="app-m-chihuo@0.3.9/entries/util/pageconsole.js",m="app-m-chihuo@0.3.9/entries/util/purl.js",v="app-m-chihuo@0.3.9/entries/util/request.js",g="app-m-chihuo@0.3.9/entries/util/toast.js",b="app-m-chihuo@0.3.9/entries/util/totop.js",w="app-m-chihuo@0.3.9/entries/util/webshare.js",x="app-m-chihuo@0.3.9/entries/util/wxapi.js",y="app-m-chihuo@0.3.9/entries/warmup.js",j="zepto@^1.2.2",_=[e,t,s,n,a,o,d,r,l,c,u,p,f,h,m,v,g,b,w,x,y],k={},C=k;define(e,[j,u,f,g,v,o,r,l],function(i,e,t){function s(i){var e=0,t=!1;for(var s in z){var n=new Image;n.onload=function(){e++,e!=z.length||t||(t=!0,i())},n.src=PAGE_CFG.imgpath+z[s]}setTimeout(function(){t||(t=!0,i())},1e4)}function n(i){function e(){setTimeout(function(){t--,0==t?(i(),g.addClass("Hide")):(g.find("i").attr("class","g-cd-"+t),e())},1e3)}g.removeClass("Hide");var t=3;e()}function a(){null==D&&(D=j('<div class="game-wrap Hide"><div class="g-cdcon Hide" id="J_countDown"><span class="g-cdinf J_gameSp"></span><i class="g-cd-3 J_gameSp"></i></div><div class="g-scene Hide" id="J_gameScene"><div class="g-timer"><div class="g-timer-n">剩余<span id="J_timerNum">10</span>秒</div><div class="g-timer-bwrap"><div id="J_timerBar" class="g-timer-bar"></div></div></div><div class="g-bspcon"><div id="J_spirite1" class="g-sp g-sp-t1 J_gameSp"></div><div id="J_spirite2" class="g-sp g-sp-t2 J_gameSp"></div><div id="J_spirite3" class="g-sp g-sp-t3 J_gameSp"></div><div id="J_spirite4" class="g-sp g-sp-t4 J_gameSp"></div><div id="J_spirite5" class="g-sp g-sp-get J_gameSp"></div></div></div></div>'),m.append(D),g=j("#J_countDown"),w=j("#J_timerBar"),x=j("#J_timerNum"),b=j("#J_gameScene"),y=[j("#J_spirite1"),j("#J_spirite2"),j("#J_spirite3"),j("#J_spirite4"),j("#J_spirite5")],j(".J_gameSp").css("background-image","url("+PAGE_CFG.imgpath+z[0]+")"),w.css("background-image","url("+PAGE_CFG.imgpath+z[1]+")")),D.removeClass("Hide"),n(function(){b.removeClass("Hide"),o(),l()})}function o(){function i(){setTimeout(function(){G>0?(G--,w.css("width",G/v*100+"%"),x.html(Math.ceil(G/10)),i()):d()},100)}i()}function d(){b.addClass("Hide"),g.addClass("Hide"),D.addClass("Hide"),k.hide(),r()}function r(){p(),J({data:{token:I.token},key:H.api.bonuslist,success:function(i){if(1==i.success&&0!=i.userid&&i.rewards&&i.rewards.length>0){for(var e=i.rewards,t=S.find(".dr-blwrap ul"),s=[],n=0,a=e.length;a>n;n++)s.push('<li><div class="n">'+e[n].worth+'</div><div class="c">'+e[n].category+"</div></li>");t.html(s.join(""))}else S.find(".dr-blist").addClass("Hide")},fail:function(){S.find(".dr-blist").addClass("Hide")}}),J({data:{dpid:I.dpId,token:I.token,ret:c(L>0?1:0)},key:H.api.openbonus,success:function(i){1==i.success&&0!=i.userid?1==i.status?(k.show(),S.find(".dr-i").removeClass("dr-bad").addClass("dr-ok"),S.find(".dr-info").html("哇，手气爆棚！<br/>获得"+i.reward.worth+"元"+i.reward.worth),S.css("left",(j(window).width()-290)/2).removeClass("Hide")):2==i.status?C("这轮已经参与过了！"):3==i.status?(k.show(),S.find(".dr-i").removeClass("dr-ok").addClass("dr-bad"),S.find(".dr-info").html("好可惜，红包君抛弃了你！<br/>下场再战！"),S.css("left",(j(window).width()-290)/2).removeClass("Hide")):4==i.status&&(C(T),I.callback()):(C(T),I.callback())},fail:function(){C(T),I.callback()}})}function l(){function i(i){var e=parseInt(3*Math.random());return e==i&&(e++,e>3&&(e=0)),e}function e(){function i(){e.hasClass("g-sp-active")&&(clearTimeout(t),e.attr("class","g-sp g-sp-get"),L++,setTimeout(function(){e.hide()},1e3))}var e=y[r];e.attr("class","g-sp-active g-sp g-sp-t"+s),e.css({top:d[1]*a+73}),e.css(0==d[0]?{left:0,right:"inherit"}:3==d[0]?{right:0,left:"inherit"}:{left:d[0]*a,right:"inherit"}),e.show();var t=setTimeout(function(){e.removeClass("g-sp-active"),e.fadeOut(200)},1e3);e.off("mousedown").on("mousedown",function(e){e.preventDefault(),i()}),e.off("touchstart").on("touchstart",function(e){e.preventDefault(),i()}),r++,r>4&&(r=0)}function t(){G>0&&(d=[i(o[0]),i(o[1])],s=0==d[0]?1:3==d[0]?4:parseInt(2*Math.random())+2,e(),o=d,setTimeout(function(){t()},1e3))}L=0;var s,n=[j(window).width(),j(window).height()],a=n[0]/4,o=[-1,-1],d=[],r=0;t()}function c(i){var e=parseInt(16*Math.random()),t=parseInt(65536*Math.random());return 1===i?(t|1<<e)<<4|e:((-1^1<<e)&t)<<4|e}function u(){_.show(),s(function(){_.hide(),k.showDeep(.8),a()})}function p(){null==S&&(S=j('<div class="dialog dialog-gameres Hide"><i class="dr-i dr-bad"></i><a href="#" class="dr-close"></a><div class="dr-info">好可惜，红包君抛弃了你！<br/>下场再战！</div><div class="dr-blist Hide"><h3><span>收获清单</span></h3><h4>奖品到“我的钱包”查看</h4><div class="dr-blleft"></div><div class="dr-blright"></div><div class="dr-blwrap"><ul style="width: 320px;"><li><div class="n">20元</div><div class="c">美食抵用券</div></li><li><div class="n">20元</div><div class="c">美食抵用券</div></li><li><div class="n">20元</div><div class="c">美食抵用券</div></li><li><div class="n">20元</div><div class="c">美食抵用券</div></li><li><div class="n">20元</div><div class="c">美食抵用券</div></li></ul></div></div><div class="dr-einf">券有效期：9.11-9.17</div><div class="btn-s btns-lr">去主会场嗨翻天</div></div>'),m.append(S),S.find(".dr-close").on("click",function(i){i.preventDefault(),S.addClass("Hide"),k.hide(),I.callback()}),S.find(".btns-lr").on("click",function(i){i.preventDefault(),S.addClass("Hide"),k.hide(),I.callback()}))}function f(){null==E&&(E=j('<div class="dialog dialog-gamestart Hide"><div class="dialog-gs-top"><h3>游戏时间到！</h3><h4>★11:00-20:00每个整点开抢</h4></div><div class="dialog-btn-w"><a href="#" class="btn-s btns-g J_btnGameOut">不玩，去主会场</a><a href="#" class="btn-s btns-r J_btnGameStart">马上抢红包</a></div></div>'),E.find(".J_btnGameOut").on("click",function(i){i.preventDefault(),E.addClass("Hide"),k.hide(),I.callback()}),E.find(".J_btnGameStart").on("click",function(i){i.preventDefault(),E.addClass("Hide"),k.hide(),u()}),m.append(E)),E.css("left",(j(window).width()-290)/2),E.removeClass("Hide"),k.show()}function h(i){j.extend(I,i),m=j("body");var e=100+10*(parseInt(5*Math.random())+1);v=e,G=e,I.autoStart?u():f()}var m,v,g,b,w,x,y,j=i("zepto"),_=i("./util/loading"),k=i("./util/overlay"),C=i("./util/toast"),J=i("./util/request"),H=i("./util/cfg"),z=["/game/gamespirite.png","/game/prog.png"],T="服务器繁忙！",S=null,E=null,D=null,G=100,I={},L=0;i("./util/fx"),i("./util/fx_methods"),t.exports=h},{entries:_,map:i({"./util/loading":u,"./util/overlay":f,"./util/toast":g,"./util/request":v,"./util/cfg":o,"./util/fx":r,"./util/fx_methods":l},C)}),define(u,[j,f],function(i,e,t){var s,n=i("zepto"),a=i("./overlay"),o=10009,d=0,r={w:n(window).width(),h:n(window).height()},l={"z-index":o-1,left:r.w/2-11,top:r.h/2-11},c=n('<div class="onloading Hide"></div>').css(l).appendTo("body");t.exports={show:function(){d++,d>0&&!s&&(c.removeClass("Hide"),a.show(),s=!0)},hide:function(){d--,0>=d&&(d=0,s&&(c.addClass("Hide"),a.hide(),s=!1))}}},{entries:_,map:i({"./overlay":f},C)}),define(f,[j],function(i,e,t){var s=i("zepto"),n=9999,a=0,o={top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,.6)","z-index":n,position:"fixed",display:"none"},d=s('<div class="overlay"></div>').css(o).appendTo("body");t.exports={show:function(){a++,d.css({background:"rgba(0,0,0,.6)"}),a>0&&d.show()},showDeep:function(i){a++,d.css({background:"rgba(0,0,0,"+i+")"}),a>0&&d.show()},hide:function(){a--,0>=a&&(a=0,d.hide())}}},{entries:_,map:C}),define(g,[j,f],function(i,e,t){function s(i,e){function t(){a.hide(),r.remove()}e=e||d;var s={position:"fixed","z-index":o,top:"50%",left:"50%","min-width":"100px","max-width":"160px",padding:"10px","border-radius":"5px","-webkit-border-radius":"5px",background:"#000",color:"#fff","text-align":"center","font-size":"14px","word-break":"break-all","-webkit-box-sizing":"border-box","box-sizing":"border-box"},r=n("<div>"+i+"</div>");r.css(s).appendTo("body").css("margin","-"+r.height()/2+"px 0 0 -"+r.width()/2+"px"),a.show();setTimeout(function(){t()},e)}var n=i("zepto"),a=i("./overlay"),o=10010,d=2e3;t.exports=s},{entries:_,map:i({"./overlay":f},C)}),define(v,[j,u],function(i,e,t){function s(i){var e={data:{},key:"/",success:null,fail:null};n.extend(e,i),n.ajax({data:e.data,url:e.key,dataType:"jsonp",timeout:1e4,beforeSend:function(){a.show()},complete:function(){a.hide()},success:function(i){e.success&&e.success(i)},error:function(){e.fail&&e.fail()}})}var n=i("zepto"),a=i("./loading");t.exports=s},{entries:_,map:i({"./loading":u},C)}),define(o,[],function(i,e,t){var s="51ping.com",n={supportList:"/promotion/festival/supportList?jsonp=?",remind:"/promotion/festival/remind?jsonp=?",festivalpre:"/promotion/festivalpre?jsonp=?",mygame:"/promotion/mygame?jsonp=?",gamesupport:"/promotion/gamesupport?jsonp=?",gameopencard:"/promotion/gameopencard?jsonp=?",deal:"/sale/festival/ajax/deal?jsonp=?",openbonus:"/promotion/festival/envelope/open?jsonp=?",bonuslist:"/promotion/festival/envelope/list?jsonp=?",sysdate:"/sale/festival/917/sysdate?jsonp=?",business:"/sale/festival/ajax/business?jsonp=?",indexpage:"/sale/festival/917?jsonp=?",indexremind:"/sale/festival/game/remind?jsonp=?"};~document.domain.indexOf("dianping.com")&&(s="dianping.com");var a="http://m."+s,o="http://m.dianping.com";t.exports={sdomain:s,api:{supportList:a+n.supportList,remind:a+n.remind,festivalpre:a+n.festivalpre,mygame:a+n.mygame,gamesupport:a+n.gamesupport,gameopencard:a+n.gameopencard,deal:o+n.deal,business:o+n.business,openbonus:a+n.openbonus,bonuslist:a+n.bonuslist,sysdate:a+n.sysdate,indexpage:a+n.indexpage,indexremind:a+n.indexremind}}},{entries:_,map:C}),define(r,[j],function(i){var e=i("zepto");!function(i,e){function t(i){return i.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function s(i){return n?n+i:i.toLowerCase()}var n,a,o,d,r,l,c,u,p,f,h="",m={Webkit:"webkit",Moz:"",O:"o"},v=document.createElement("div"),g=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,b={};i.each(m,function(i,t){return v.style[i+"TransitionProperty"]!==e?(h="-"+i.toLowerCase()+"-",n=t,!1):void 0}),a=h+"transform",b[o=h+"transition-property"]=b[d=h+"transition-duration"]=b[l=h+"transition-delay"]=b[r=h+"transition-timing-function"]=b[c=h+"animation-name"]=b[u=h+"animation-duration"]=b[f=h+"animation-delay"]=b[p=h+"animation-timing-function"]="",i.fx={off:n===e&&v.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:s("TransitionEnd"),animationEnd:s("AnimationEnd")},i.fn.animate=function(t,s,n,a,o){return i.isFunction(s)&&(a=s,n=e,s=e),i.isFunction(n)&&(a=n,n=e),i.isPlainObject(s)&&(n=s.easing,a=s.complete,o=s.delay,s=s.duration),s&&(s=("number"==typeof s?s:i.fx.speeds[s]||i.fx.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(t,s,n,a,o)},i.fn.anim=function(s,n,h,m,v){var w,x,y,j={},_="",k=this,C=i.fx.transitionEnd,J=!1;if(n===e&&(n=i.fx.speeds._default/1e3),v===e&&(v=0),i.fx.off&&(n=0),"string"==typeof s)j[c]=s,j[u]=n+"s",j[f]=v+"s",j[p]=h||"linear",C=i.fx.animationEnd;else{x=[];for(w in s)g.test(w)?_+=w+"("+s[w]+") ":(j[w]=s[w],x.push(t(w)));_&&(j[a]=_,x.push(a)),n>0&&"object"==typeof s&&(j[o]=x.join(", "),j[d]=n+"s",j[l]=v+"s",j[r]=h||"linear")}return y=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;i(e.target).unbind(C,y)}else i(this).unbind(C,y);J=!0,i(this).css(b),m&&m.call(this)},n>0&&(this.bind(C,y),setTimeout(function(){J||y.call(k)},1e3*(n+v)+25)),this.size()&&this.get(0).clientLeft,this.css(j),0>=n&&setTimeout(function(){k.each(function(){y.call(this)})},0),this},v=null}(e)},{entries:_,map:C}),define(l,[j],function(i){var e=i("zepto");!function(i,e){function t(t,s,n,a,o){"function"!=typeof s||o||(o=s,s=e);var d={opacity:n};return a&&(d.scale=a,t.css(i.fx.cssPrefix+"transform-origin","0 0")),t.animate(d,s,null,o)}function s(e,s,n,a){return t(e,s,0,n,function(){o.call(i(this)),a&&a.call(this)})}var n=window.document,a=(n.documentElement,i.fn.show),o=i.fn.hide,d=i.fn.toggle;i.fn.show=function(i,s){return a.call(this),i===e?i=0:this.css("opacity",0),t(this,i,1,"1,1",s)},i.fn.hide=function(i,t){return i===e?o.call(this):s(this,i,"0,0",t)},i.fn.toggle=function(t,s){return t===e||"boolean"==typeof t?d.call(this,t):this.each(function(){var e=i(this);e["none"==e.css("display")?"show":"hide"](t,s)})},i.fn.fadeTo=function(i,e,s){return t(this,i,e,null,s)},i.fn.fadeIn=function(i,e){var t=this.css("opacity");return t>0?this.css("opacity",0):t=1,a.call(this).fadeTo(i,t,e)},i.fn.fadeOut=function(i,e){return s(this,i,null,e)},i.fn.fadeToggle=function(e,t){return this.each(function(){var s=i(this);s[0==s.css("opacity")||"none"==s.css("display")?"fadeIn":"fadeOut"](e,t)})}}(e)},{entries:_,map:C})}();